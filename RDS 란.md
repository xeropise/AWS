### [Amazon RDS](https://docs.aws.amazon.com/ko_kr/AmazonRDS/latest/UserGuide/Welcome.html)란

![AWS-Feature](https://user-images.githubusercontent.com/50399804/134775169-04a5d733-e23b-4bbb-a2f9-6099aca4a4a7.png)

- Amazon Relational Database Service(Amazon RDS)는 관계형 데이터베이스 6종류의 제품을 클라우드에 최적화된 상태로 제공하는 서비스이다.

- Amazon Aurora 외에도 PostgreSQL, MySQL, MariaDB, Oracle Dtabase, SQL Server 를 지원하며 메모리, 성능, I/O 등이 최적화된 데이터베이스 인스턴스를 제공한다.

- 데이터베이스의 제공 방식은 EC2와 비슷하다. VPC 상에 인스턴스 형태로 구축하며 다양한 인스턴스 클래스를 사용할 수 있다.

  - EC2와 다른 점은 RDS는 '매니지드 서비스' 이며 업데이트 등의 관리가 AWS에 의해 자동으로 이루어진다는 점이다.

  - 백업과 같이 번거로운 관리 작업도 자동화되어 있어 관리자가 수행할 필요가 없다.

- AWS Database Migration Server(DMS) 를 사용하면 기존 데이터베이스를 이전하거나 복제하는 것도 가능하다.

<br>

---

### 인스턴스 클래스

- RDS는 EC2와 마찬가지로 인스턴스 형식으로 사용하는데 인스턴스 클래스는 표준, 메모리 최적화, 버스트 성능의 3종류가 있다.

- 클래스에 따라 micro, small, medium, large, xlarge, 2xlarge, 4xlarge, 8xlarge, 16xlarge 크기를 제공하고 있다. 인스턴스 클래스에 따라 지원하지 않는 DBMS나 버전도 있다.

- 데이터베이스 인스턴스는 VPC에 설치해야 한다. 예전에 데이터베이스 인스턴스는 VPC 외부에도 설치할 수 있었지만, 지금은 VPC에 설치하지 않으면 안 된다.

- 자세한 것은 [여기](https://aws.amazon.com/ko/rds/instance-types/)에서 참조하자.

| 용도         | 인스턴스 클래스 | 내용                                                                                                                           |
| ------------ | --------------- | ------------------------------------------------------------------------------------------------------------------------------ |
| 표준         | db.m5 등        | 범용적인 인스턴스 클래스                                                                                                       |
| 메모리최적화 | db.x1e          | 메모리를 많이 사용하는 애플리케이션에 최적화된 인스턴스 클래스로, 일부 리전에서만 제공된다.<br>한국 리전에서는 이용할 수 있다. |
|              | db.x1           | 메모리를 많이 사용하는 애플리케이션에 최적화된 인스턴스 클래스이다. 메모리 최대치가 db.x1e의 절반                              |
|              | db.r5 등        | 네트워크와 EBS의 성능을 강화한다. AWS Nitro System 을 사용한다.                                                                |
| 버스트 성능  | db.t3           | CPU의 최대 사용률까지 버스트 성능으로 사용할 수 있다.                                                                          |

<br>

---

### RDS 요금

- 기본적으로 EC2 와 비슷하지만, DBMS에 따라 인스턴스 요금이 다른 것이 특징이다. DBMS는 무료와 유료가 있고, 유료 DBMS는 AWS 에서도 라이선스 사용료가 부과된다. 라이선스 요금은 인스턴스 요금에 포함되어 있다.
  - RDS 요금 = 스토리지(사용하고 있는 디스크) 요금 + 데이터베이스 인스턴스 요금 + 백업 스토리지 요금 + 통신료

<br>

---

### RDS의 장점과 단점

- RDS의 장점

  - 매니지드 서비스이므로 AWS가 업데이트 등을 관리해주기 때문에 따로 관리하지 않아도 된다.

  - 간단하게 데이터베이스를 생성할 수 있으며 온프레미스에서 데이터를 이전하기 쉽고 소프트웨어를 수정하지 않아도 이전이 가능하다.

  - EC2 와 연동하기 쉽고 같은 네트워크 내에 있다면 통신료도 무료이다.

- RDS의 단점

  - 사용자가 자유롭게 사용할 수 없다.

  - 제공하고 있는 DBMS의 종류나 버전이 한정되어 있으며, AWS가 업데이트를 자동으로 수행하여 편리하지만 오히려 업데이트하면 곤란한 시점에 수행되는 경우도 있다.

> RDS의 자동 업데이트 ?
>
> - 새로운 버전이 출시되거나 소프트웨어 취약점이 발견된 경우에는 자동으로 업데이트된다.
>
> - 예고 없이 갑자기 업데이트한다면 당연히 곤란하기 때문에 서비스 정지가 필요할 경우에는 AWS에서 따로 공지하는데 세가지 중 하나를 선택한다.
>
>   - 자동 업데이트를 하는 방법, 테스트 환경으로 사용할 경우는 별로 영향이 없을 지도 모르지만 그래도 싫어하는 사람이 있을 수 있다.
>
>   - 관리 콘솔에서 수동으로 업데이트하거나 업데이트 시간을 지정하는 방법, 업데이트 시에 일시적으로 데이터베이스 인스턴스를 사용할 수 없다. 관리자가 모르는 사이에 업데이트되는 것을 방지할 수 있고, 사전에 사이트 사용자와 시스템 사용자에게 공지할 수 있다.
>
>   - 업데이트를 무시하는 방법, 치명적인 취약점에 대한 업데이트는 무시하기 힘들고 오래된 버전은 AWS가 점점 지원을 종료하므로 어느 시점에는 업데이트를 해야 한다. 업데이트를 하지 않는 선택은 문제를 미루는 것에 불과하므로 아예 하지 않는 선택지는 없다고 생각하자.



<br>



***

### RDS에서 사용할 수 있는 DBMS: 데이터베이스 엔진 선택

- RDS는 AWS가 만든 Amazon Aurora 외에도 PostgreSQL, MySQL, MariaDB, Oracle Database, SQL Server 등 데이터베이스 엔진 6 종류를 사용할 수 있다.

  

- 온프레미스에서  AWS로 쉽게 이전할 수 있고 상용 데이터베이스(SQL Server, Oracle Database) 도 지원 한다.  상용 데이터베이스의 경우 데이터베이스 라이선스 요금이 인스턴스 사용 요금에 포함되어 있다. 요금 체계가 단순하다는 저도 장점이다.



<br>



***

### 지원하는 DBMS 목록

| DBMS (제공사)                                        | 내용                                                         |
| ---------------------------------------------------- | ------------------------------------------------------------ |
| Amazon Aurora <br>(Amazon)                           | MySQL 이나 PostgreSQl 과 호환할 수 있다. AWS가 만든 RDBMS 이다. |
| PostgreSQL<br> (PostgreSQL Global Development Group) | 1970년대에 개발한 Ingress 라는 데이터베이스로부터 만들어진 오픈소스 데이터베이스이다.<br> MySQl과 마찬가지로 블로그를 비롯하여 쇼핑몰 사이트까지 폭넓게 사용되고 있다. |
| MySQL<br>(Oracle)                                    | 스웨덴의 MySQl AB가 개발한 데이터베이스로, 썬 마이크로 시스템에 매수되었다. <br>오픈소스 RDBMS 중에 인기가 많은 편이다. |
| MariaDB<br>(Monty Program Ab)                        | MySQL 개발자가 독립적으로 분리하여 개발한 데이터베이스로 기능은 MySQL과 거의 같지만,<br>라이선스가 <u>GPL</u> 이라는 점이 다르다. |
| Oracle Database<br>(Oracle)                          | 오라클이 제공하는 데이터베이스로 소규모 시스템부터 엔터파이즈 시스템까지 폭넓게 지원하는 데이터베이스이며, 즈우건이나 금융 시스템에서 많이 사용되고 있다. 윈도우는 물론 리눅스에서도 동작한다. |
| Microsoft <br>SQL Server<br>(Microsoft)              | 마이크로소프트가 제공하는 데이터베이스, 소규모 시스템부터 엔터프라이즈 시스템까지 폭넓게 지원한다.<br>원래는 윈도우 서버용 소프트웨어였지만 현재는 리눅스에서도 동작한다. |



> GPL
>
> - General Public License의 약자로 소프트웨어 개발자가 정해 놓은 사용 방법으로, 조건 안에서 사용하는 것을 전제로 무료로 사용할 수 있는 라이선스



<br>



### Amazon Aurora란?

- MySQl 이나 PostgreSQL 과 호환할 수 있으며, AWS가 만든 RDBMS를 말한다. 요금이 조금 비싼 편이지만 견고하고 성능이 뛰어나다.

  

- 호환성을 가지고 있기 때문에 일반적인 도구나 스냅샷을 사용하여 온프레미스 환경의 MySQL이나 PostgreSQl 을 이전할 수 있고, SQL 문도 그대로 사용할 수 있으며, 코드 , 애플리케이션, 드라이버, 도구 등의 프로그램 및 소프트웨어를 수정할 필요도 없다.

  

- AWS 용으로 설계되어 있기 때문에 일반적인 MySQL 이나 PostgerSQL 데이터베이스에 비해 속도가 빠르다. 매니지드 서비스이며 안전하게 사용할 수 있다.



- AWS에서 MySQL 이나 PostgreSQL 을 사용하는 방법은 3가지 이다.

  - EC2에 설치하는 방법

    

  - RDS를 사용하는 방법

    

  - Amazon Aurora 를 사용하는 방법

    

- Amazon Aurora 의 경우, DBMS 를 변경할 때 큰 문제가 없고, 높은 성능을 원할 경우에 사용을 추천한다.

  

- RDS로 이전할 때 최신 버전이나 평가판, 이전 버전은 지원하지 않을 가능성이 있으므로 이럴 경우에는 EC2에 MySQL 이나 PostgreSQL 을 설치하여 이전한다.



<br>



***

### RDS 사용 절차: 데이터베이스를 사용하기까지의 절차

