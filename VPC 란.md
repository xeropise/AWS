## Amazon VPC

![Picture2-2](https://user-images.githubusercontent.com/50399804/134214722-775e4c07-78d5-4612-997b-2ed8f10aea4b.png)

- AWS가 제공하는 AWS 계정 전용 가상 네트워크

- 네트워크와 서브넷 범위, 라우팅 테이블, 네트워크 게이트웨이 등 가상 네트워킹 환경을 설정할 수 있다.

- 웹 서버나 데이터베이스 서버와 같은 서버들은 네트워크에 연결되어 있어야 한다.

- 한 장소에 모아서 네트워크를 연결하는 것도 가능하지만 그렇게 되면 서버로서의 의미가 없다.

- AWS 서비스인 EC2 나 RDS(Relational Database Service) 도 마찬가지로 네트워크에 연결되어 있어야 한다.

- 이러한 네트워크를 구축하기 위해 사용되는 것이 Amazon Virtual Private Cloud(Amazon VPC)이다.

- AWS 계정 전용 가상 네트워크 서비스로, AWS에서 제공하는 리소스만 설치할 수 있다. 

- EC2 나 RDS 의 경우 VPC를 선택하지 않으면 서버를 생성할 수 없기 때문에 리소스를 사용하기 위해서는 반드시 필요한 서비스이다.



<br>



***

### VPC의 구성

- VPC 내에 서버를 설치하면 해당 네트워크에 소속되지만, 별도로 설정하지 않으면 VPC 자체는 격리된 네트워크가 된다.

  

- 외부와 통신하려면 VPC를 인터넷 혹은 회사 LAN과 연결해야 한다.



<br>



***

### VPC의 기능

- VPC는 네트워크와 서브넷 범위, 라우팅 테이블, 네트워크 게이트웨이 등과 같은 가상 네트워킹 환경을 성절할 수 있다.

  

- 물리적인 네트워크와 다른 점도 있지만, 기본적인 개념은 같다. IPv4와 IPv6 둘 다 사용할 수 있다.



| 항목                                              | 내용                                                         |
| ------------------------------------------------- | ------------------------------------------------------------ |
| CIDR 블록                                         | [서브넷](https://hyoje420.tistory.com/32)으로 네트워크를 나눈 범위 이다. <br>VPC를 생성할 때 네트워크 범위를 CIDR로 정하고 이를 더 작은 서브넷으로 나누어 사용한다. |
| [서브넷 마스크](https://limkydev.tistory.com/166) | 네트워크의 크기를 계산하는 값이다. CIDR은 서브넷 마스크의 표기법 중 하나이다. |
| 가용 영역                                         | 서브넷이 구축된 물리적 장소이다.                             |
| 인터넷 게이트웨이                                 | 인터넷에 접속하기 위한 출입구, VPC를 인터넷에 연결하지 않을 경우에는 불필요하다. |
| 라우팅                                            | 어떤 데이터를 어디에 보낼지 조정한다.<br>인터넷 게이트웨이와 라우팅으로 데이터 송수신을 설정하지 않으면 VPC가 인터넷에 접속되지 않는다.<br>가정이나 기업의 라우터(가정의 경우 공유기) 장비가 이 역할을 수행하는 경우가 많지만<br>AWS는 소프트웨어가 이 기능을 담당한다. |
| 라우팅 테이블                                     | 라우팅에 대한 설정이 기록된 테이블이다.                      |
| 보안 그룹                                         | AWS가 제공하는 가상 방홥겨이다.<br>인스턴스 단위로 설정하여 유입되는 데이터는 '거부' 가 기본 설정이다. |
| 네트워크 ACL                                      | AWS가 제공하는 가상 방화벽이다. 서브넷 단위로 설정된다.      |



<br>



***

### VPC 네트워크의 특징과 라우팅 테이블

- VPC 네트워크는 클라우드이기 때문에 일반 네트워크와는 조금 차이가 있다.

  - 그중 가장 큰 차이점은 라우터이다.

    

- VPC는 물리적인 라우터가 아닌 소프트웨어가 라우터 역할을 하며 라우팅을 수행한다.

  

- 라우팅은 설정된 라우팅 테이블에 따라 동작하는데, 라우팅 테이블 하나에 서브넷 여러 개를 설정할 수 있다.

  

- 물리적인 서버의 경우 LAN 케이블과 와이파이로 라우터와 연결하겠지만, 클라우드는 라우팅 테이블로 연결한다.

  

- 일반적인 서브넷 사이의 통신은 라우터로 이루어지지만, VPC의 경우 라우터 없이 직접 통신할 수 있다.

  

- VPC 하나에 인터넷 게이트웨이 한 개만 설정할 수 있다.

  

- 라우터와 인터넷 게이트웨이는 명시적인 IP 주소가 부여되지 않는다. 이는 클라우드의 특징이다.

  

- VPC 네트워크의 특징은 다음과 같다.

  - 소프트웨어가 라우팅한다. 라우터는 IP주소를 갖지 않는다.

    

  - 라우팅 테이블 한 개에 서브넷 여러 개를 설정할 수 있다.

    

  - VPC 한 개에 인터넷 게이트웨이는 한 개만 설정할 수 있고, IP 주소를 갖지 않는다.

    

  - 서브넷 사이의 통신은 라우터 없이 직접 통신할 수 있다.
